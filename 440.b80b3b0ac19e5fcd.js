"use strict";(self.webpackChunkoneaj_angular=self.webpackChunkoneaj_angular||[]).push([[440],{6440:(k,l,i)=>{i.r(l),i.d(l,{ApDashboardModule:()=>T});var d=i(6895),c=i(4940);class p{constructor(){this.type_wise_amount={type:[],amount:[]},this.category_wise_outstanding={category:[],amount:[]},this.vendor_wise_outstanding={vendor_name:[],amount:[]},this.agening_amount_percentage={},this.agening_amount={}}}var r=i(433),t=i(8256),m=i(529),h=i(5620),f=i(7556),g=i(6205);function b(n,s){if(1&n&&(t.TgZ(0,"div",16),t._UZ(1,"apx-chart",17),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("series",e.categoryWiseOutstanding.series)("chart",e.categoryWiseOutstanding.chart)("markers",e.categoryWiseOutstanding.markers)("dataLabels",e.categoryWiseOutstanding.dataLabels)("stroke",e.categoryWiseOutstanding.stroke)("colors",e.categoryWiseOutstanding.colors)("title",e.categoryWiseOutstanding.title)("xaxis",e.categoryWiseOutstanding.xaxis)}}function v(n,s){if(1&n&&(t.TgZ(0,"div",16),t._UZ(1,"apx-chart",18),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("series",e.vendorWiseOutstanding.series)("chart",e.vendorWiseOutstanding.chart)("xaxis",e.vendorWiseOutstanding.xaxis)("stroke",e.vendorWiseOutstanding.stroke)("plotOptions",e.vendorWiseOutstanding.plotOptions)("dataLabels",e.vendorWiseOutstanding.dataLabels)("yaxis",e.vendorWiseOutstanding.yaxis)("labels",e.vendorWiseOutstanding.labels)("legend",e.vendorWiseOutstanding.legend)("title",e.vendorWiseOutstanding.title)("subtitle",e.vendorWiseOutstanding.subtitle)("colors",e.vendorWiseOutstanding.colors)}}function A(n,s){if(1&n&&(t.TgZ(0,"div",16),t._UZ(1,"apx-chart",19),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("series",e.typeWiseAmount.series)("chart",e.typeWiseAmount.chart)("labels",e.typeWiseAmount.labels)("responsive",e.typeWiseAmount.responsive)}}function _(n,s){if(1&n&&(t.TgZ(0,"div",16),t._UZ(1,"apx-chart",20),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("series",e.ageningAmount.series)("chart",e.ageningAmount.chart)("yaxis",e.ageningAmount.yaxis)("xaxis",e.ageningAmount.xaxis)("labels",e.ageningAmount.labels)("stroke",e.ageningAmount.stroke)("title",e.ageningAmount.title)("dataLabels",e.ageningAmount.dataLabels)("fill",e.ageningAmount.fill)("tooltip",e.ageningAmount.tooltip)}}function x(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),t._uU(6,"AP Dashboard"),t.qZA()(),t.TgZ(7,"div",9)(8,"button",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.fillter=!a.fillter)}),t._UZ(9,"span",11),t._uU(10," Filter "),t.qZA(),t.TgZ(11,"button",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.fillterReset())}),t._UZ(12,"span",12),t.qZA()()(),t.TgZ(13,"div",13)(14,"div",14)(15,"h5"),t._uU(16,"Category Wise Outstanding"),t.qZA(),t.YNc(17,b,2,8,"div",15),t.qZA(),t.TgZ(18,"div",14)(19,"h5"),t._uU(20,"Category Wise Outstanding"),t.qZA(),t.YNc(21,v,2,12,"div",15),t.qZA()(),t.TgZ(22,"div",13)(23,"div",14)(24,"h5"),t._uU(25,"Type Wise Amount"),t.qZA(),t.YNc(26,A,2,4,"div",15),t.qZA(),t.TgZ(27,"div",14)(28,"h5"),t._uU(29,"Agening Amount"),t.qZA(),t.YNc(30,_,2,10,"div",15),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(17),t.Q6J("ngIf",e.categoryWiseOutstanding),t.xp6(4),t.Q6J("ngIf",e.vendorWiseOutstanding),t.xp6(5),t.Q6J("ngIf",e.typeWiseAmount),t.xp6(4),t.Q6J("ngIf",e.ageningAmount)}}function y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"div",13)(3,"div",7)(4,"h2",23),t._uU(5,"Fillter"),t.qZA()(),t.TgZ(6,"div",7)(7,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.fillter=!a.fillter)}),t._UZ(8,"i",25),t.qZA()()(),t.TgZ(9,"form",26)(10,"label",27),t._uU(11,"From Date"),t.qZA(),t._UZ(12,"input",28),t.TgZ(13,"label",29),t._uU(14,"To Date"),t.qZA(),t._UZ(15,"input",30),t.TgZ(16,"input",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.applyFilter())}),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(9),t.Q6J("formGroup",e.filterForm)}}function O(n,s){1&n&&(t.TgZ(0,"div",32),t._UZ(1,"img",33),t.qZA())}const C=[{path:"",component:(()=>{class n{constructor(e,o,a,D){this.apiService=e,this.commonService=o,this.auth=a,this.formbuilder=D,this.fillter=!1,this.loading=!1,this.AP=new p,this.filterForm=this.formbuilder.group({from_date:["",[r.kI.required]],to_date:["",[r.kI.required]]})}ngOnInit(){this.filterForm.patchValue(JSON.parse(String(localStorage.getItem("apFilter")))),this.loadData()}applyFilter(){localStorage.setItem("apFilter",JSON.stringify(this.filterForm.value)),console.log(this.filterForm),this.fillter=!this.fillter,this.loadData()}fillterReset(){localStorage.setItem("apFilter",JSON.stringify({from_date:"",to_date:""})),this.filterForm.reset(),this.loadData()}loadData(){this.loading=!0;let e=this.filterForm.value;e.tenant_id=this.auth.currentUserValue.tenantid,this.apiService.post("https://yxga6kjfm2.execute-api.ap-south-1.amazonaws.com/dashboard",JSON.stringify(e),{responseType:"text"}).subscribe({next:o=>{const a=JSON.parse(o);this.AP=a,setTimeout(()=>{this.categoryWiseOutstandingChart(),this.vendorWiseOutstandingChart(),this.typeWiseAmountChart(),this.ageningAmountChart(),this.loading=!1})},error:o=>console.log(o)})}categoryWiseOutstandingChart(){this.categoryWiseOutstanding={series:[{name:"Shipment Count",data:this.AP.category_wise_outstanding.amount}],chart:{height:300,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},grid:{borderColor:"#f1f1f1"},xaxis:{categories:this.AP.category_wise_outstanding.category}}}vendorWiseOutstandingChart(){this.vendorWiseOutstanding={series:[{name:"Shipment Count",data:this.AP.vendor_wise_outstanding.amount}],chart:{height:300,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},grid:{borderColor:"#f1f1f1"},xaxis:{categories:this.AP.vendor_wise_outstanding.vendor_name}}}typeWiseAmountChart(){this.typeWiseAmount={series:this.AP.type_wise_amount.amount,chart:{height:300,type:"donut"},labels:this.AP.type_wise_amount.type,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}ageningAmountChart(){const e=Object.keys(this.AP.agening_amount),o=Object.values(this.AP.agening_amount),a=Object.values(this.AP.agening_amount_percentage);this.ageningAmount={series:[{name:"Amount",type:"column",data:o},{name:"Percentage",type:"line",data:a}],chart:{height:350,type:"line"},stroke:{width:[0,4]},dataLabels:{enabled:!0,enabledOnSeries:[1]},labels:e,xaxis:{type:"string"},yaxis:[{title:{text:"Amount"}},{opposite:!0,title:{text:"Percentage"}}]}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.eN),t.Y36(h.v),t.Y36(f.h),t.Y36(r.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ap-dashboard"]],decls:3,vars:3,consts:[["class","container-fluid p-0 row",4,"ngIf"],["class","container-fluid p-5","id","fillter",4,"ngIf"],["class","col text-center",4,"ngIf"],[1,"container-fluid","p-0","row"],[1,"col","bg-light"],[1,"col",2,"width","80vw !important","margin-left","2% !important"],[1,"row","p-4","bg-white"],[1,"col"],[1,"display-7"],[1,"col-2"],["href","#",1,"btn","btn-outline-dark","m-1",3,"click"],[1,"fa","fa-filter"],[1,"fa","fa-refresh"],[1,"row"],[1,"col","m-2","p-3","bg-white","border-radius-1",2,"overflow","hidden !important"],["class","card-body",4,"ngIf"],[1,"card-body"],[3,"series","chart","markers","dataLabels","stroke","colors","title","xaxis"],[3,"series","chart","xaxis","stroke","plotOptions","dataLabels","yaxis","labels","legend","title","subtitle","colors"],[3,"series","chart","labels","responsive"],[3,"series","chart","yaxis","xaxis","labels","stroke","title","dataLabels","fill","tooltip"],["id","fillter",1,"container-fluid","p-5"],["id","filterInside",1,"container","p-5","w-50","m-auto"],[1,"text-white"],["id","closebtn",1,"btn","btn-outline-light","text-right",3,"click"],[1,"fas","fa-times-circle"],[1,"form-group","mt-5",3,"formGroup"],["for","",1,"text-white"],["type","month","name","from_date","id","from_date","formControlName","from_date",1,"form-control","mt-3"],["for","",1,"text-white","mt-4"],["type","month","name","to_date","id","to_date","formControlName","to_date",1,"form-control","mt-3"],["type","submit","value","Apply Fillter",1,"btn","btn-success","mt-4",3,"click"],[1,"col","text-center"],["src","https://dashboardarapgp.s3.ap-south-1.amazonaws.com/loading.gif","alt","logo",1,"img-fluid"]],template:function(e,o){1&e&&(t.YNc(0,x,31,4,"div",0),t.YNc(1,y,17,1,"div",1),t.YNc(2,O,2,0,"div",2)),2&e&&(t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.fillter),t.xp6(1),t.Q6J("ngIf",o.loading))},dependencies:[d.O5,g.x,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.bg-light[_ngcontent-%COMP%]{background-color:#eff1f3!important}.bg-primary-2[_ngcontent-%COMP%]{background-color:#031737!important}.w-90[_ngcontent-%COMP%]{width:90%!important;margin-left:5%!important}.border-radius-1[_ngcontent-%COMP%]{border-radius:1.5rem!important}.bg-success-1[_ngcontent-%COMP%]{background-color:#c7f6c5!important}.bg-primary-3[_ngcontent-%COMP%]{background-color:#c6edff!important}.bg-danger-1[_ngcontent-%COMP%]{background-color:#f6c5c5!important}.bg-warning-1[_ngcontent-%COMP%]{background-color:#fffeb1!important}.display-7[_ngcontent-%COMP%]{font-weight:400!important}"]}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(C),c.Bz]}),n})();var W=i(9102),u=i(4284),w=i(8102);u.XX.plotlyjs=W;let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,Z,g.X,u.XX,r.u5,r.UX,w.LayoutModule]}),n})()}}]);