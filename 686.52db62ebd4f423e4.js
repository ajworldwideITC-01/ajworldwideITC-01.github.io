"use strict";(self.webpackChunkoneaj_angular=self.webpackChunkoneaj_angular||[]).push([[686],{1686:(J,l,i)=>{i.r(l),i.d(l,{ArDashboardModule:()=>R});var c=i(6895),d=i(4940);class h{constructor(){this.customer_wise_outstanding={customer_name:[],ar_balance:[]},this.salesperson_wise_outstanding={sales_person:[],ar_balance:[]},this.type_outstanding={category:[],ar_balance:[]},this.ar_balance_by_agening={},this.ar_balance_by_agening_percent={},this.cash_agening_outstanding={}}}var n=i(433),t=i(8256),p=i(529),m=i(5620),b=i(7556),g=i(6205);function f(a,s){if(1&a&&(t.TgZ(0,"div",17),t._UZ(1,"apx-chart",18),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("series",e.typeWiseAmount.series)("chart",e.typeWiseAmount.chart)("labels",e.typeWiseAmount.labels)("responsive",e.typeWiseAmount.responsive)}}function _(a,s){if(1&a&&(t.TgZ(0,"div",17),t._UZ(1,"apx-chart",18),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("series",e.arAmountPercentage.series)("chart",e.arAmountPercentage.chart)("labels",e.arAmountPercentage.labels)("responsive",e.arAmountPercentage.responsive)}}function A(a,s){if(1&a&&(t.TgZ(0,"div",17),t._UZ(1,"apx-chart",19),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("series",e.arAgeingReportWithOutstanding.series)("chart",e.arAgeingReportWithOutstanding.chart)("markers",e.arAgeingReportWithOutstanding.markers)("dataLabels",e.arAgeingReportWithOutstanding.dataLabels)("stroke",e.arAgeingReportWithOutstanding.stroke)("colors",e.arAgeingReportWithOutstanding.colors)("title",e.arAgeingReportWithOutstanding.title)("xaxis",e.arAgeingReportWithOutstanding.xaxis)}}function x(a,s){if(1&a&&(t.TgZ(0,"div",17),t._UZ(1,"apx-chart",20),t.qZA()),2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("series",e.saleManWise.series)("chart",e.saleManWise.chart)("xaxis",e.saleManWise.xaxis)("stroke",e.saleManWise.stroke)("dataLabels",e.saleManWise.dataLabels)("yaxis",e.saleManWise.yaxis)("labels",e.saleManWise.labels)("legend",e.saleManWise.legend)("title",e.saleManWise.title)("subtitle",e.saleManWise.subtitle)("colors",e.saleManWise.colors)}}function v(a,s){if(1&a&&(t.TgZ(0,"div",17),t.YNc(1,x,2,11,"div",15),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.saleManWise)}}function O(a,s){if(1&a&&(t.TgZ(0,"div",17),t._UZ(1,"apx-chart",21),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("series",e.cashAgeningOutstanding.series)("chart",e.cashAgeningOutstanding.chart)("xaxis",e.cashAgeningOutstanding.xaxis)("stroke",e.cashAgeningOutstanding.stroke)("plotOptions",e.cashAgeningOutstanding.plotOptions)("dataLabels",e.cashAgeningOutstanding.dataLabels)("yaxis",e.cashAgeningOutstanding.yaxis)("labels",e.cashAgeningOutstanding.labels)("legend",e.cashAgeningOutstanding.legend)("title",e.cashAgeningOutstanding.title)("subtitle",e.cashAgeningOutstanding.subtitle)("colors",e.cashAgeningOutstanding.colors)}}function y(a,s){if(1&a&&(t.TgZ(0,"div",17),t._UZ(1,"apx-chart",21),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("series",e.customersWiseOutstanding.series)("chart",e.customersWiseOutstanding.chart)("xaxis",e.customersWiseOutstanding.xaxis)("stroke",e.customersWiseOutstanding.stroke)("plotOptions",e.customersWiseOutstanding.plotOptions)("dataLabels",e.customersWiseOutstanding.dataLabels)("yaxis",e.customersWiseOutstanding.yaxis)("labels",e.customersWiseOutstanding.labels)("legend",e.customersWiseOutstanding.legend)("title",e.customersWiseOutstanding.title)("subtitle",e.customersWiseOutstanding.subtitle)("colors",e.customersWiseOutstanding.colors)}}function Z(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),t._uU(6,"AR Dashboard"),t.qZA()(),t.TgZ(7,"div",9)(8,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.fillter=!r.fillter)}),t._UZ(9,"span",11),t._uU(10," Filter "),t.qZA(),t.TgZ(11,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.fillterReset())}),t._UZ(12,"span",12),t.qZA()()(),t.TgZ(13,"div",13)(14,"div",14)(15,"h5"),t._uU(16,"Type Wise Amount"),t.qZA(),t.YNc(17,f,2,4,"div",15),t.qZA(),t.TgZ(18,"div",14)(19,"h5"),t._uU(20,"AR Amount Ageing Percentage"),t.qZA(),t.YNc(21,_,2,4,"div",15),t.qZA(),t.TgZ(22,"div",14)(23,"h5"),t._uU(24,"AR Amount Ageing"),t.qZA(),t.YNc(25,A,2,8,"div",15),t.qZA()(),t.TgZ(26,"div",13)(27,"div",14)(28,"h5"),t._uU(29,"Salesmanwise Outstanding"),t.qZA(),t.YNc(30,v,2,1,"div",15),t.qZA(),t.TgZ(31,"div",14)(32,"h5"),t._uU(33,"Cash Agening Outstanding"),t.qZA(),t.YNc(34,O,2,12,"div",15),t.qZA()(),t.TgZ(35,"div",13)(36,"div",16)(37,"h5"),t._uU(38,"Customers wise outstanding"),t.qZA(),t.YNc(39,y,2,12,"div",15),t.qZA()()()()()}if(2&a){const e=t.oxw();t.xp6(17),t.Q6J("ngIf",e.typeWiseAmount),t.xp6(4),t.Q6J("ngIf",e.typeWiseAmount),t.xp6(4),t.Q6J("ngIf",e.typeWiseAmount),t.xp6(5),t.Q6J("ngIf",e.typeWiseAmount),t.xp6(4),t.Q6J("ngIf",e.typeWiseAmount),t.xp6(5),t.Q6J("ngIf",e.saleManWise)}}function C(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",22)(1,"div",23)(2,"div",13)(3,"div",7)(4,"h2",24),t._uU(5,"Fillter"),t.qZA()(),t.TgZ(6,"div",7)(7,"button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.fillter=!r.fillter)}),t._UZ(8,"i",26),t.qZA()()(),t.TgZ(9,"form",27)(10,"label",28),t._uU(11,"From Date"),t.qZA(),t._UZ(12,"input",29),t.TgZ(13,"label",30),t._uU(14,"To Date"),t.qZA(),t._UZ(15,"input",31),t.TgZ(16,"input",32),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.applyFilter())}),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(9),t.Q6J("formGroup",e.filterForm)}}function W(a,s){1&a&&(t.TgZ(0,"div",33),t._UZ(1,"img",34),t.qZA())}const w=[{path:"",component:(()=>{class a{constructor(e,o,r,D){this.apiService=e,this.commonService=o,this.auth=r,this.formbuilder=D,this.loading=!1,this.fillter=!1,this.AR=new h,this.filterForm=this.formbuilder.group({from_date:["",[n.kI.required]],to_date:["",[n.kI.required]]})}ngOnInit(){this.filterForm.patchValue(JSON.parse(String(localStorage.getItem("arFilter")))),this.loadData()}applyFilter(){localStorage.setItem("arFilter",JSON.stringify(this.filterForm.value)),console.log(this.filterForm),this.fillter=!this.fillter,this.loadData()}fillterReset(){localStorage.setItem("arFilter",JSON.stringify({from_date:"",to_date:""})),this.filterForm.reset(),this.loadData()}loadData(){this.loading=!0;let e=this.filterForm.value;e.tenant_id=this.auth.currentUserValue.tenantid,this.apiService.post("https://3x4nctukre.execute-api.ap-south-1.amazonaws.com/dashboard",JSON.stringify(e),{responseType:"text"}).subscribe({next:o=>{const r=JSON.parse(o);this.AR=r,setTimeout(()=>{this.typeWiseAmountChart(),this.arAmountPercentageChart(),this.arAgeingReportWithOutstandingChart(),this.saleManWiseChart(),this.cashAgeningOutstandingChart(),this.customersWiseOutstandingChart(),this.loading=!1})},error:o=>console.log(o)})}typeWiseAmountChart(){this.typeWiseAmount={series:this.AR.type_outstanding.ar_balance,chart:{height:300,type:"donut"},labels:this.AR.type_outstanding.category,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}arAmountPercentageChart(){this.arAmountPercentage={series:Object.values(this.AR.ar_balance_by_agening_percent),chart:{width:380,type:"pie"},labels:Object.keys(this.AR.ar_balance_by_agening_percent),responsive:[{breakpoint:480,options:{chart:{width:200},legend:{show:!1}}}]}}arAgeingReportWithOutstandingChart(){this.arAgeingReportWithOutstanding={series:[{name:"Amount",data:Object.values(this.AR.ar_balance_by_agening)}],chart:{height:300,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},grid:{borderColor:"#f1f1f1"},xaxis:{categories:Object.keys(this.AR.ar_balance_by_agening),labels:{show:!1}}}}saleManWiseChart(){this.saleManWise={series:[{name:"Salesman wise",data:this.AR.salesperson_wise_outstanding.ar_balance??[0,1]}],chart:{height:250,type:"line",zoom:{enabled:!1},toolbar:{show:!1}},markers:{size:5},dataLabels:{enabled:!0},stroke:{curve:"smooth"},xaxis:{categories:this.AR.salesperson_wise_outstanding.sales_person??[0,1]}}}cashAgeningOutstandingChart(){this.cashAgeningOutstanding={series:[{data:Object.values(this.AR.cash_agening_outstanding)}],chart:{height:250,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},grid:{borderColor:"#f1f1f1"},xaxis:{categories:Object.keys(this.AR.cash_agening_outstanding)}}}customersWiseOutstandingChart(){this.customersWiseOutstanding={series:[{data:this.AR.customer_wise_outstanding.ar_balance}],chart:{height:400,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},grid:{borderColor:"#f1f1f1"},xaxis:{categories:this.AR.customer_wise_outstanding.customer_name}}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.eN),t.Y36(m.v),t.Y36(b.h),t.Y36(n.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ar-dashboard"]],decls:3,vars:3,consts:[["class","container-fluid p-0 row",4,"ngIf"],["class","container-fluid p-5","id","fillter",4,"ngIf"],["class","col text-center",4,"ngIf"],[1,"container-fluid","p-0","row"],[1,"col","bg-light"],[1,"col",2,"width","80vw !important","margin-left","2% !important"],[1,"row","p-4","bg-white"],[1,"col"],[1,"display-7"],[1,"col-2"],[1,"btn","btn-outline-dark","m-1",3,"click"],[1,"fa","fa-filter"],[1,"fa","fa-refresh"],[1,"row"],[1,"col","m-2","p-3","bg-white","border-radius-1",2,"overflow","hidden !important"],["class","card-body",4,"ngIf"],[1,"col","m-2","p-3","bg-white","border-radius-1",2,"overflow","hidden !important","width","80vw !important"],[1,"card-body"],[3,"series","chart","labels","responsive"],[3,"series","chart","markers","dataLabels","stroke","colors","title","xaxis"],[3,"series","chart","xaxis","stroke","dataLabels","yaxis","labels","legend","title","subtitle","colors"],[3,"series","chart","xaxis","stroke","plotOptions","dataLabels","yaxis","labels","legend","title","subtitle","colors"],["id","fillter",1,"container-fluid","p-5"],["id","filterInside",1,"container","p-5","w-50","m-auto"],[1,"text-white"],["id","closebtn",1,"btn","btn-outline-light","text-right",3,"click"],[1,"fas","fa-times-circle"],[1,"form-group","mt-5",3,"formGroup"],["for","",1,"text-white"],["type","month","name","from_date","id","from_date","formControlName","from_date",1,"form-control","mt-3"],["for","",1,"text-white","mt-4"],["type","month","name","to_date","id","to_date","formControlName","to_date",1,"form-control","mt-3"],["type","submit","value","Apply Fillter",1,"btn","btn-success","mt-4",3,"click"],[1,"col","text-center"],["src","https://dashboardarapgp.s3.ap-south-1.amazonaws.com/loading.gif","alt","logo",1,"img-fluid"]],template:function(e,o){1&e&&(t.YNc(0,Z,40,6,"div",0),t.YNc(1,C,17,1,"div",1),t.YNc(2,W,2,0,"div",2)),2&e&&(t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.fillter),t.xp6(1),t.Q6J("ngIf",o.loading))},dependencies:[c.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,g.x],styles:[".bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.bg-light[_ngcontent-%COMP%]{background-color:#eff1f3!important}.bg-primary-2[_ngcontent-%COMP%]{background-color:#031737!important}.w-90[_ngcontent-%COMP%]{width:90%!important;margin-left:5%!important}.border-radius-1[_ngcontent-%COMP%]{border-radius:1.5rem!important}.bg-success-1[_ngcontent-%COMP%]{background-color:#c7f6c5!important}.bg-primary-3[_ngcontent-%COMP%]{background-color:#c6edff!important}.bg-danger-1[_ngcontent-%COMP%]{background-color:#f6c5c5!important}.bg-warning-1[_ngcontent-%COMP%]{background-color:#fffeb1!important}.display-7[_ngcontent-%COMP%]{font-weight:400!important}"]}),a})()}];let T=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.Bz.forChild(w),d.Bz]}),a})();var M=i(9102),u=i(4284),k=i(8102);u.XX.plotlyjs=M;let R=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[c.ez,n.u5,u.XX,n.UX,g.X,T,n.u5,n.UX,k.LayoutModule]}),a})()}}]);